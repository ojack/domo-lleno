{"version":3,"file":"static/webpack/static/development/pages/category.js.d518212b01e6bd4d7867.hot-update.js","sources":["webpack:///./pages/category.js"],"sourcesContent":["import Layout from \"../components/Layout.js\";\n//import FullContainer from \"../components/FullContainer.js\";\n\nimport React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport fetch from \"isomorphic-unfetch\";\nimport Error from \"next/error\";\nimport PageWrapper from \"../components/PageWrapper.js\";\nimport Menu from \"../components/Menu.js\";\nimport CategoryTitle from \"../components/CategoryTitle.js\"\nimport { Config } from \"../config.js\";\nimport { Title, ContentWrapper } from \"../style-config.js\";\nimport ImageGrid from \"../components/ImageGrid.js\"\nimport Festivales from \"../components/Festivales.js\"\nimport Programacion from \"../components/Programacion.js\"\n\n\nclass Category extends Component {\n    static async getInitialProps(context) {\n      console.log('getting props from category')\n        const { slug } = context.query;\n        const categoriesRes = await fetch(\n            `${Config.apiUrl}/wp-json/wp/v2/categories?slug=${slug}`\n        );\n        const categories = await categoriesRes.json();\n\n        if (categories.length > 0) {\n            const postsRes = await fetch(\n                `${Config.apiUrl}/wp-json/wp/v2/posts?_embed&categories=${\n                    categories[0].id\n                }`\n            );\n            const posts = await postsRes.json();\n            return { categories, posts, domeState: 'open' };\n        }\n        return { categories };\n    }\n    render() {\n        if (this.props.categories.length == 0)\n            return <Error statusCode={404} />;\n\n        // const posts = this.props.posts.map((post, index) => {\n        //     return (\n        //         <ul key={index}>\n        //             <li>\n        //                 <Link\n        //                     as={`/post/${post.slug}`}\n        //                     href={`/post?slug=${post.slug}&apiRoute=post`}\n        //                 >\n        //                     <a>{post.title.rendered}</a>\n        //                 </Link>\n        //             </li>\n        //         </ul>\n        //     );\n        // });\n        console.log(\"category props\", this.props)\n        let body\n        if (this.props.categories[0].slug === 'festivales') {\n          body =     <Festivales posts={this.props.posts} />\n\n        } else if (this.props.categories[0].slug === 'programacion'){\n          body =    <Programacion posts={this.props.posts} />\n        } else if (this.props.categories[0].slug === 'artistas'){\n          body = <ImageGrid posts={this.props.posts} />\n        }\n        //<ImageGrid posts={this.props.posts} />\n        //  <Festivales posts={this.props.posts} />\n        return (\n            <Layout>\n                <Menu menu={this.props.headerMenu} />\n                <div className={ContentWrapper}>\n                  <CategoryTitle title={this.props.categories[0].name} />\n                    {body}\n                  </div>\n            </Layout>\n        );\n    }\n}\n\nexport default PageWrapper(Category);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;AAoBA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AADA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;;;;;;AA1DA;;;;;;AACA;AACA;;AACA;AACA;;AADA;;AAGA;AACA;;AADA;AACA;AACA;;;;;;AACA;AACA;;AADA;;AAKA;AACA;;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AAnBA;AACA;AA6DA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}